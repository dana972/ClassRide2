<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sidebar with Dropdown Menu | CodingNepal</title>
    
    <!-- Linking Google Fonts for Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
<link rel="stylesheet" href="/assets/css/sidebar.css" />
  <style>
   
  </style>
  </head>
  <body>
        <button class="sidebar-menu-button">
          <span class="material-symbols-rounded">menu</span>
        </button>
    
        <aside class="sidebar">
          <header class="sidebar-header">
            <a href="#" class="header-logo">
              <i class="fas fa-bus white-icon"></i>
              <h1 class="text-secondary display-6">ClassRide</h1>
            </a>
            
            <button class="sidebar-toggler">
              <span class="material-symbols-rounded">chevron_left</span>
            </button>
          </header>
    
          <nav class="sidebar-nav">
            <ul class="nav-list primary-nav">
              <li class="nav-item">
                <a href="#" class="nav-link" data-target="dashboard">
                  <span class="material-symbols-rounded">dashboard</span>
                  <span class="nav-label">Dashboard</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link" data-target="manage-trips">
                  <span class="material-symbols-rounded">calendar_today</span>
                  <span class="nav-label">Manage Trips for Tomorrow</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link" data-target="trips-history">
                  <span class="material-symbols-rounded">history</span>
                  <span class="nav-label">Trips History</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link" data-target="notifications">
                  <span class="material-symbols-rounded">notifications</span>
                  <span class="nav-label">Notifications</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link" data-target="chats">
                  <span class="material-symbols-rounded">chat</span>
                  <span class="nav-label">Chats</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="./index.ejs" class="nav-link" data-target="home">
                  <span class="material-symbols-rounded">home</span>
                  <span class="nav-label">Home</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link" data-target="logout">
                  <span class="material-symbols-rounded">logout</span>
                  <span class="nav-label">Logout</span>
                </a>
              </li>
            </ul>
          </nav>
        </aside>
    
        <div class="main-content">
          <div id="dashboard" class="content-section" style="display:none;">

            <h1>Hello, <%= studentName %>!</h1>

          
<div class="top-boxes">
    <div class="small-box">
        <h3>Current Students</h3>
    
    </div>
    <div class="small-box">
       
    </div>
</div>

<h1>Dashboard</h1>
<div class="dashboard-container">
  <div class="dashboard-box">
    <div class="box-header">
      <h3>Buses</h3>
      <button class="add-button add-bus">Add More</button>
    </div>
   
  
     
  </div>
  
  <div class="dashboard-box">
    <div class="box-header">
      <h3>Destinations</h3>
      <button class="add-button add-destination">Add More</button>
    </div>
   
      
  </div>
  
 


    
    <div class="dashboard-box">
      <h3>Drivers</h3>
   
  </div>
  
</div>
          </div>

       
   



<%- include('./partials/requestModal') %>
<%- include('./partials/addDestinationModal') %>
<%- include('./partials/addBusModal') %>
<%- include('./partials/manageTrips') %>
<%- include('./partials/tripsHistory') %>
<%- include('./partials/notifications') %>
<%- include('./partials/chats') %>
<%- include('./partials/logout') %>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const navLinks = document.querySelectorAll(".nav-link");
    const contentSections = document.querySelectorAll(".content-section");

    navLinks.forEach((link) => {
      link.addEventListener("click", function (event) {
        event.preventDefault(); // Prevent default link behavior

        const targetId = this.getAttribute("data-target");

        // Hide all content sections
        contentSections.forEach((section) => {
          section.style.display = "none";
        });

        // Show the targeted section
        const targetSection = document.getElementById(targetId);
        if (targetSection) {
          targetSection.style.display = "block";
        }
      });
    });
  });
</script>

<script>// Function to send a DELETE request to remove a bus
  function removeBus(busId) {
    // Make an AJAX request to the server to remove the bus
    fetch(`/remove-bus/${busId}`, {
      method: 'DELETE',
    })
    .then((response) => {
      if (response.ok) {
        // Reload the page or update the DOM after successful deletion
        alert('Bus removed successfully!');
        location.reload(); // Reload the page to reflect the changes
      } else {
        alert('Failed to remove bus!');
      }
    })
    .catch((error) => {
      console.error('Error:', error);
      alert('An error occurred while removing the bus.');
    });
  }
  </script>

<script src="/assets/js/sidebar.js"></script>

<script src="/assets/js/modals.js"></script>

      </body>
    </html>
    